<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play: Rock - Paper - Scissors</title>
</head>
<body>
    <h1>Play Rock, Paper, or Scissors!</h1>
    <div id = 'buttons'>
        <button id = 'rButton'>Rock</button>
        <button id = 'pButton'>Paper</button>
        <button id = 'sButton'>Scissors</button>
    </div>
    <div id = "results">
        <h2>Results</h2>
        <p id = "resultsP"></p>
    </div>

    <script>
        // results div variable.
        const resultsDiv = document.getElementById('resultsP');

        //Player picks rock.
        const rockButton = document.getElementById('rButton');
        const onRockClick = function() {
            oneRound('rock');
        }
        rockButton.addEventListener('click', onRockClick);

        // Player picks paper.
        const paperButton = document.getElementById('pButton');
        const onPaperClick = function() {
            oneRound('paper');
        }
        paperButton.addEventListener('click', onPaperClick);
        
        // Player picks scissors.
        const scissorsButton = document.getElementById('sButton');
        const onScissorsClick = function() {
            oneRound('scissors');
        }
        scissorsButton.addEventListener('click', onScissorsClick);


        // Computer's choice function.  
        let playChoice = "";
        let compChoice = "";
        function computerPlay() {
            compNum = Math.floor(Math.random() * 3);
            if (compNum === 0) {
                compChoice = "rock";  
            }
            else if (compNum === 1) {
                compChoice = "paper";  
            }
            else if (compNum === 2) {
                compChoice = "scissors";  
            }  
            console.log(`Computer's pick: ${compChoice}`)
        }
        
        // Play one round function
        function oneRound(playChoice) {
            let trackArr = [];
            let whoWins = ""
            computerPlay();
            console.log(`Player's pick: ${playChoice}`)
            if (compChoice === playChoice) {
                whoWins = "It's a tie!"
                trackArr.push(0);
            } else if (compChoice === "rock" && playChoice === "scissors") {
                whoWins = "Computer wins."
                trackArr.push(-1);
            } else if (compChoice === "paper" && playChoice === "rock") {
                whoWins = "Computer wins."
                trackArr.push(-1);
            } else if (compChoice === "scissors" && playChoice === "paper") {
                whoWins = "Computer wins."
                trackArr.push(-1);
            } else {
                whoWins = 'Player wins!'
                trackArr.push(1);
            }
            console.log(trackArr);
            // change results div  
            resultsDiv.innerHTML = `Computer's pick: ${compChoice}</br> </br>
        Player's pick: ${playChoice} </br></br>
        <span style = "font-size: x-large" id = 'wins'>${whoWins}</span.`
        resultsDiv.style.color = 'green'; 
        }


        // Best of a number amount of games.

        let trackPlayerArr = [0];
        let trackComputerArr = [0];
        let bestOfNumber = 3;
        function bestOf() {
            
            if (trackPlayerArr.reduce((a, b) => a + b, 0) < bestOfNumber && trackComputerArr.reduce((a, b) => a + b, 0) < bestOfNumber) {
                playerPlay();
                computerPlay();
                if (compChoice === playChoice) {
                console.log("It's a tie!")
                bestOf();
                } else if (compChoice === "rock" && playChoice === "scissors") {
                console.log("Computer wins.")
                trackComputerArr.push(1);
                bestOf();
                } else if (compChoice === "paper" && playChoice === "rock") {
                console.log("Computer wins.")
                trackComputerArr.push(1);
                bestOf();
                } else if (compChoice === "scissors" && playChoice === "paper") {
                console.log("Computer wins.")
                trackComputerArr.push(1);
                bestOf();
                } else {
                console.log('Players wins!')
                trackPlayerArr.push(1);
                bestOf();
            }
        
            if (trackPlayerArr.reduce((a, b) => a + b, 0) >= bestOfNumber){
               console.log("The Player Wins!");
               console.log(trackPlayerArr);
            } else if (trackComputerArr.reduce((a, b) => a + b, 0) >= bestOfNumber){
               console.log("Game Over.");
               console.log(trackComputerArr);
               }
            }
        }
        

        
    </script>
</body>
</html>